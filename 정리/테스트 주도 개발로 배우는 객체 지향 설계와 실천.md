# 테스트 주도 개발로 배우는 객체 지향 설계와 실천

## 1장 테스트 주도 개발의 핵심은 무엇인가?

###   TDD를 왜 해야 할까?

- 시스템 규모를 믿을 수 있는 방식으로 키우고, 예상치 못한 변화에 대처하기 위해 필요하다.
- 주기적인 피드백과 점진적인 개발 방식은 프로젝트와 관련된 사람들이 무엇을 달성해야 하는지 이애하고 그 과정에서 잘못 이해하고 있는 바를 식별하게 한다. 
  - 피드백
    - 가정을 갖고 작성한 코드에 대한 검사할 수 있는 기회 
    - 피드백 주기 -> 고리형 시스템 : 중첩된 고리 형태 안에서 피드백은 어디서나 오류, 오해를 포착하고 고칠 수 있는 기회를 만든다.
- TDD에서는 데스트를 설계 활동으로 바꾼다.

### TDD를 통해 얻을 수 있는 것은 무엇인가?

* 시스템 구현 - 시스템이 동작하는가?	
  * 컨텍스트를 선명하게 인지하는 동안 오류를 탐지한다.
* 시스템 설계 - 시스템이 잘 구조화돼 있는가?
  * 다음 작업에 대한 조건을 명확하게 알 수 있다.
  * 느슨하게 결합된 구성 요소를 작성할 수 있게 된다.
  * 코드가 하는 일에 대한 실행 가능한 설명이 더해진다. 
  * 완전한 회귀 스위트가 늘어난다.
  * 언제 작업이 충분히 완료 됐는지 알게 되어 과도한 최적화를 하거나 불필요한 기능을 더하지 않게 된다. 
* 외부 품질 유지 : 시스템이 고객과 사용자의 요구를 얼마나 잘 충족하는가 
* 내부 품질 유지 : 시스템이 개발자와 관리자의 요구를 얼마나 잘 충족하는가 -> 시스템 동작 방식을 안전하고 예상 가능한 상태로 바꿀 수 있게함

### TDD 황금률

> 실패하는 테스트 없이는 새 기능을 작성하지 말라.

### 리팩터링이란 무엇인가?

> 기존 코드의 작동 방식을 바꾸지 않은 채로 기존 코드의 내부 구조를 변경하는 것이다.
>
> 리팩터링의 핵심은 코드가 구현하는 기능의 표현을 개선해 코드를 좀 더 유지 보수할 수 있게 만드는 것이다.

* 리팩터링의 범위는 이해하기 쉽고 안전할 정도로 규모가 작아야 한다.

### 통합 테스트, 인수테스트란 무엇인가?

* 통합 테스트 
  * 변경할 수 없는 코드를 대상으로 코드가 동작하는가?
  * 일부 코드가 변경할 수 없는 팀 바깥의 코드를 어떻게 이용할지 검사하는 테스트 
  * 서드 파티 코드를 대상으로 만든 추상화가 기대한 대로 동작하는지 확인하기 위한 테스트 
* 인수 테스트
  * 프로젝트를 이끌어 가는 테스트 
  * 만들고자 하는 기능을 시험하는 테스트 
  * 전체 시스템이 동작하는가?
  * 전 구간 테스트 
    * 시스템 내부 코드를 가능한 한 직접 호출하지 말고 외부에서 유입되는 시스템과 상호작용하는 테스트
    * 시스템과 해당 시스템을 구축하고 배포하는 프로세스를 모두 시험

## 2장 객체를 활용한 테스트 주도 개발 
### 객체지향이란 무엇인가?

* 하나의 책임을 수행하기 위해 각자 역할을 가지고 자율적으로 동작하는 객체들이 서로 협력하는 방식으로 프로그래밍 하는 것.
* 객체 지향 시스템 
  * 협업하는 객체의 망으로 구성
  * 시스템은 객체를 생성해 서로 메시지를 주고받을 수 있게 조립하는 과정을 거쳐 만들어진다.
* 객체 
  * 자신이 이해할 수 있는 메시지를 처리 
  * 내부 상태를 캡슐화 
  * 자율적으로 메시지를 처리 

### 값과 객체는 무엇이고, 어떤 차이점이 있는가?

* 값 
  * 변하지 않는 양이나 크기를 나타낸다.
  * 불변적
* 객체 
  * 시간이 지남에 따라 상태가 변한다. -> 시간의 추이에 따른 객체의 행위를 나타낸다.
  * 식별자가 있다.
  * 계산 절차를 담고 있다.
  * 가변적

### 메시지란 무엇인가?

* 다른 객체와 의사소통할 수 있는 수단
* 객체간의 의존성을 명시적으로 나타내는 것 
* 객체간의 의사소통(메시지)에 초첨을 맞추어 설계를 이끌어 나가야 한다. 
  * 왜 메시지 중심으로 설계를 이끌어 나가야 하는가?
    * 메시지 = 객체가 다른 객체에 접근할 수 있는 유일한 방법이다.
    * 메시지 = 메시지를 받은 객체가 수행해야 하는 책임을 의미한다.
    * 책임 = 객체가 무엇을 해야하는가? 를 설명한다.
    * 메시지에 초점을 맞춘다. = 객체가 무엇을 하는가에 초점을 맞춘다. 
    * 어떻게 하는가에 대해서는 객체가 자율적으로 선택하게 한다.
    * 시스템의 행위를 변경하기 쉽게 하여 시스템이 유연하도록 만든다.

### 디미터 법칙

* 디미터의 법칙 
  * 객체는 자기 자신을 책임지는 자율적인 존재여야 한다.
  * 객체는 내부적으로 보유하고 있거나 메시지를 통해 확보한 정보만 가지고 의사 결정을 내려야 한다.
  * 객체는 다른 객체를 탐색해 뭔가를 일어나게 해서는 안된다.

### mock 객체란 무엇인가?

* 테스트 대상이 되는 객체의 이웃을 대체하는 가짜 객체 
* 목 객체를 사용하면 객체 간의 관계를 파악하는 데에 도움이 된다.

### 테스트에서 목 객체를 어떻게 사용하는가?

1. 테스트 대상 객체의 이웃 객체를 목 인스턴스로 생성
2. 해당 목 인스턴스를 어떻게 호출하고 상태를 검사하는가에 관한 예상 구문 결정
3. 테스트시 스텁 형태로 동작할 필요가 있는 행위를 구현 

* 목 객체의 사용으로 단위 테스트는 대상 객체와 해당 객체를 둘러싼 환경 간의 관계를 명확하게 드러나게 만든다.





