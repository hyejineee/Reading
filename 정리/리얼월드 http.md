# 리얼월드 HTTP

## 1장. HTTP/1.0의 신택스 : 기본이 되는 네가지 요소 

* http란 무엇인가? 

  * 웹 브라우저와 웹 서버가 통신하는 절차와 형식을 규정한 것
  * 다양한 서비스의 인터페이스로도 사용된다.

* http/0.9의 한계 

  * 하나의 문서를 전송하는 기능밖에 없었다. -> 그럼 현재는 여러가지 문서를 전송할 수 있나?
  * 통신되는 모든 내용은 html 문서로 가정했으므로, 다운로드할 콘텍츠의 형식을 서버가 전달할 수단이 없었다.
  * 클라이언트 쪽에서 검색 이외의 요청을 보낼 수 없었다. 
  * 새로운 문장을 전송하거나 갱신 또는 삭제할 수 없었다.

* http/1.0에서 추가된 내용

  * 요청 시 
    * 메서드 
    * http 메서드 
    * 헤더 
  * 응답 시 
    * http버전과 스테이터스 코드 
    * 헤더 

* 헤더 [헤더 - MDN](https://developer.mozilla.org/ko/docs/Web/HTTP/Headers)

  * 이름 : 값 형태 

  * 본문 이외의 모든 정보를 포함하는 곳 

  * 서버와 클라이언트 사이에 필요한 추가 정보, 지시나 명령, 당부 등을 쓰는 장소 

  * 클라이언트 -> 서버 헤드

    * User-Agent : 클라이언트가 자신의 이름을 넣는 곳 
    * Referer : 서버에서 참고하는 추가 정보. 클라이언특각 요청을 보낼 때 보곡있던 페이지의 URL을 보낸다.
    * Authorization : 특별한 클라이언트에만 통신을 허가할 때 인증 정보를 서버에게 전달. 

  * 서버 -> 클라이언트 

    * Content-Type : 파일의 종류를 지정. MIME 타입이라는 식별자를 기술한다.
    * Content-Length : 바디 크기. 압축이 이루어지는 경우 압축 이후의 크기가 들어간다.
    * Content-Encoding : 압축이 이루어진 경우 압축 형식을 설명
    * Date : 문서 날짜

  * MIME 타입 [MIME - MDN](https://developer.mozilla.org/ko/docs/Web/HTTP/Basics_of_HTTP/MIME_types)

    * 클라이언트에게 전송된 문서의 다양성을 알려주기 위한 메커니즘

    * 브라우저들은 리소스를 내려받았을 때 해야할 기본 동작이 무엇인지를 결정하기 위해 대게 MIME 타입을 사용.

    * 구조 :

      * type/ sub type -> text / html 

      * type = 카테고리. 개별 혹은 멀티파트 타입이 될 수 있다. 

        * 멀티파트 타입 : 

          일반저으로 다른 MIME 타입들을 지닌 개별적인 파트들로 나누어지는 문서의 카테고리를 가리킨다. 

          * 합성된 문서를 나타내는 방법 

      * subtype = 각각의 타입에 한정되는 값이 들어간다. 

    * [정확한 MIME타입 설정의 중요성](https://developer.mozilla.org/ko/docs/Web/HTTP/Basics_of_HTTP/MIME_types#%EC%A0%95%ED%99%95%ED%95%9C_mime_%ED%83%80%EC%9E%85_%EC%84%A4%EC%A0%95%EC%9D%98_%EC%A4%91%EC%9A%94%EC%84%B1)

    * MIME 스니핑 

      * 브라우저에서 리소스를 훑어보고 정확한 MIME 타입을 추측해내는 것 
      * MIME 타입이 없을 때 혹은 클라이언트가 타입이 잘못 설정됐닥고 판다한 경우에, 브라우저들은 MIME 스니핑을 시도할 수 있다. 
      * 보안의 구멍이 될 수 있다.

* 메서드 ([메서드- MDN](https://developer.mozilla.org/ko/docs/Web/HTTP/Methods))

  * 주어진 리소스에 수행하길 원하는 행동을 나타냄. 리소스에 대한 조작을 서버에 지시.
  * 응답 메서드는 안전하거나, 캐시 가능하거나, 멱등성을 가질 수 있다. 

* 스테이터스 코드 ([스테이터스 코드 - MDN](https://developer.mozilla.org/ko/docs/Web/HTTP/Status))

  * 특정 http 요청에 대한 응답 코드 
  * 1xx : 조건부 응답 - 처리가 계속 됨을 나타낸다.
  * 2xx : 성공 - 성공했을 때의 응답 
  * 3xx : 리다이렉션 
    *  서버에서 클라이언트로의 명령.
    *  오류가 아니라 정상 처리의 범주. 
    *  클라이언트는 요청을 마치기 위해 추가 동작을 취해야 한다. 
    *  클라이언트는 응답의 Location헤더를 보고 해당 주소로 다시 요청한다. 
    *  리다이렉트하는 곳이 다른 서버라면 리다이렉트할 때 마다 TCP세션 접속, HTTP 송수신으로 두 번 왕복 통신이 발생한다. -> 리다이텍트 수가 늘어나면, 그만큼 표시에 걸리는 시간이 늘어난다.
  * 4xx : 요청 오류 (클라이언트 에러) - 클라이언트가 보낸 요청이 오류가 있다.
  * 5xx : 서버 오류 (서버 에러) - 서버 내부에서 오류가 발생했다.